
----Current status: ---------------
Prompt ORADATA diskgroup having xxx gb of freespace out of yyyy gb.

SET LINESIZE 145
SET PAGESIZE 9999
SET VERIFY off
COLUMN disk_group_name FORMAT a20 HEAD 'Disk Group Name'
COLUMN disk_file_path FORMAT a20 HEAD 'Path'
COLUMN disk_file_name FORMAT a20 HEAD 'File Name'
COLUMN total_mb FORMAT 999,999,999 HEAD 'File Size (MB)'
COLUMN used_mb FORMAT 999,999,999 HEAD 'Used Size (MB)'
COLUMN free_mb FORMAT 999,999,999 HEAD 'Free Size (MB)'
COLUMN pct_used FORMAT 999.99 HEAD 'Pct. Used'
break on report on disk_group_name skip 1
compute sum label “” of total_mb used_mb free_mb on disk_group_name
compute sum label “Grand Total: ” of total_mb used_mb free_mb on report
SELECT NVL(a.name, '[CANDIDATE]') disk_group_name,b.path disk_file_path,b.name disk_file_name,
b.total_mb total_mb,(b.total_mb – b.free_mb) used_mb,b.free_mb free_mb,
ROUND((1- (b.free_mb / b.total_mb))*100, 2) pct_used FROM v$asm_diskgroup a RIGHT OUTER JOIN v$asm_disk b
USING (group_number) ORDER BY a.name 
/

--------------size By group

SET LINESIZE 145
SET PAGESIZE 9999
SET VERIFY off
COLUMN group_name FORMAT a20 HEAD 'Disk Group|Name'
COLUMN sector_size FORMAT 99,999 HEAD 'Sector|Size'
COLUMN block_size FORMAT 99,999 HEAD 'Block|Size'
COLUMN allocation_unit_size FORMAT 999,999,999 HEAD 'Allocation|Unit Size'
COLUMN state FORMAT a11 HEAD 'State'
COLUMN type FORMAT a6 HEAD 'Type'
COLUMN total_mb FORMAT 999,999,999 HEAD 'Total Size (MB)'
COLUMN used_mb FORMAT 999,999,999 HEAD 'Used Size (MB)'
COLUMN pct_used FORMAT 999.99 HEAD 'Pct. Used'
break on report on disk_group_name skip 1
compute sum label "Grand Total: " of total_mb used_mb on report
SELECT
name group_name
, sector_size sector_size
, block_size block_size
, allocation_unit_size allocation_unit_size
, state state
, type type
, total_mb total_mb
, (total_mb - free_mb) used_mb
, free_mb
, ROUND((1- (free_mb / total_mb))*100, 2) pct_used, round(free_mb/total_mb*100,2) pct_free 
FROM
v$asm_diskgroup
ORDER BY
name
/


TABLESPACE ALIASSES:
asm :

CREATE TABLESPACE GRH DATAFILE '+DATA/MTLDB/DATAFILE/grh01.dbf' size 100M autoextend on next 32M maxsize 7G;

CREATE TABLESPACE GRHI DATAFILE '+DATA/MTLDB/DATAFILE/grhi01.dbf' size 100M autoextend on next 32M maxsize 4G;

CREATE TABLESPACE REGIONAL DATAFILE '+DATA/MTLDB/DATAFILE/reg01.dbf' size 100M autoextend on next 32M maxsize 7G;

CREATE TABLESPACE REGIONALI DATAFILE '+DATA/MTLDB/DATAFILE/regi01.dbf' size 100M autoextend on next 32M maxsize 4G;

MODIFY ALIASSES:
+DATA/MTLDB/DATAFILE/grh01.dbf
ALTER DISKGROUP DATA ADD ALIAS '+data/orcl/syaux.dbf' FOR '+DATA/MTLSTD/DATAFILE/SYSAUX.258.908886741'; 
ALTER DISKGROUP DATA ADD ALIAS '+data/orcl/sytem.dbf' FOR '+DATA/MTLSTD/DATAFILE/SYSTEM.260.908886741'; 
ALTER DISKGROUP DATA ADD ALIAS '+data/orcl/undotbs1.dbf' FOR '+DATA/MTLSTD/DATAFILE/UNDOTBS1.261.908886741';
ALTER DISKGROUP DATA ADD ALIAS '+data/orcl/users.dbf' FOR '+DATA/MTLSTD/DATAFILE/USERS.264.908886833'; 


ASMCMD [+DATA/MTLSTD/DATAFILE]> mkalias +DATA/MTLSTD/DATAFILE/GRH.259.908886741 grh01.dbf
ASMCMD [+DATA/MTLSTD/DATAFILE]> mkalias +DATA/MTLSTD/DATAFILE/GRHI.257.908886739 grhi01.dbf   
ASMCMD [+DATA/MTLSTD/DATAFILE]> mkalias +DATA/MTLSTD/DATAFILE/REGIONAL.262.908886819 reg01.dbf 
ASMCMD [+DATA/MTLSTD/DATAFILE]> mkalias +DATA/MTLSTD/DATAFILE/REGIONALI.263.908886829 regi01.dbf   



EMC recommends setting the redo logs ASM template10 to fine-grain instead of coarse to create better concurrency.
To change the database redo logs template, execute the following command on the ASM disk group holding the logs:

SQL> ALTER DISKGROUP <REDO_DG> ALTER TEMPLATE onlinelog ATTRIBUTES (FINE);

 



/*
V$ASM_DISK Header_Status:
------------------------
UNKNOWN - Automatic Storage Management disk header has not been read

CANDIDATE - Disk is not part of a disk group and may be added to a disk group with the ALTER DISKGROUP statement

INCOMPATIBLE - Version number in the disk header is not compatible with the Automatic Storage Management software 

version.

PROVISIONED - Disk is not part of a disk group and may be added to a disk group with the ALTER DISKGROUP 

statement. The PROVISIONED header status is different from the CANDIDATE header status in that PROVISIONED implies 

that an additional platform-specific action has been taken by an administrator to make the disk available for 

Automatic Storage Management.

MEMBER - Disk is a member of an existing disk group. No attempt should be made to add the disk to a different disk 

group. The ALTER DISKGROUP statement will reject such an addition unless overridden with the FORCE option

FORMER - Disk was once part of a disk group but has been dropped cleanly from the group. It may be added to a new 

disk group with the ALTER DISKGROUP statement.

CONFLICT - Automatic Storage Management disk was not mounted due to a conflict

FOREIGN - Disk contains data created by an Oracle product other than ASM. This includes datafiles, logfiles, and 

OCR disks.
*/

* List file details 


ASMCMD :

ASMCMD> ls -lsrtLa  grh01.dbf
Type      Redund  Striped  Time             Sys  Block_Size  Blocks       Bytes       Space  Name
DATAFILE  UNPROT  COARSE   NOV 13 20:00:00  N          8192  547713  4486864896  4488953856  grh01.dbf => +DATA/MTLSTD/DATAFILE/GRH.259.908886741